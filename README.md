## Структура проекта

http://80.89.224.137:8000/admin/

```text
MEETUP_BOT/
├─ .venv/
├─ manage.py               # точка входа для Django-команд
├─ .gitignore
├─ meetupbot/              # Django-проект (настройки)
│  ├─ __init__.py
│  ├─ asgi.py
│  ├─ settings.py          # настройки Django
│  ├─ urls.py              # корневые URL проекта
│  └─ wsgi.py
└─ core/                   # главное приложение (логика бота и модели)
   ├─ __init__.py
   ├─ apps.py
   ├─ admin.py             # регистрация моделей в админке
   ├─ models.py            # все модели домена: Event, Talk, Question и т.д.
   ├─ views.py             # (опционально) HTTP-views
   ├─ urls.py              # URL-и приложения
   ├─ services/            # бизнес-логика
   │  ├─ __init__.py
   │  ├─ networking.py     # матчи, анкеты
   │  ├─ questions.py      # вопросы спикерам
   │  └─ donations.py      # работа с донатами
   ├─ bot/                 # код телеграм-бота
   │  ├─ __init__.py
   │  ├─ handlers.py       # обработчики команд и состояний
   │  ├─ keyboards.py      # inline / reply-клавиатуры
   │  └─ bot.py            # сборка updater/dispatcher
   └─ management/
      └─ commands/
         └─ run_bot.py     # команда `python manage.py run_bot`

```

## Модели проекта

| Модель                    | За что отвечает                                                                                                              |
| ------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| `TelegramUser`            | Хранит Telegram-ID, имя, username и роль (гость, спикер, организатор), чтобы связывать действия в боте с пользователем в БД. |
| `Event`                   | Описывает сам Python-митап: название, дата, место, активный ли и текущий ли, чтобы группировать доклады, вопросы и донаты.   |
| `Talk`                    | Представляет доклад внутри мероприятия Event с привязкой к спикеру и временем, включая статус “идёт сейчас”.                 |
| `SpeakerProfile`          | Хранит расширенную биографию и компетенции спикера для отображения информации в программе.                                   |
| `SpeakerApplication`      | Сохраняет заявку пользователя на участие в качестве спикера с темой, описанием и статусом модерации.                         |
| `FutureEventSubscription` | Фиксирует подписку пользователя на уведомления о будущих митапах и анонсах.                                                  |
| `NetworkingProfile`       | Анкета участника для нетворкинга, содержащая рассказ о себе, уровень опыта и технологии, чтобы искать match.                 |
| `NetworkingEncounter`     | История показов и match-ей между участниками, чтобы избегать повторов и запоминать реакции.                                  |
| `Question`                | Вопросы от участников, которые можно привязывать к докладам Talk и отображать спикеру со статусом ответа.                    |
| `Donation`                | Донат пользователя для конкретного Event с суммой, валютой, провайдером оплаты и статусом платежа.                           |
| `Broadcast`               | Представляет рассылку или важное объявление, созданное организатором, связанное с Event или глобальное.                      |
| `BroadcastDelivery`       | Лог доставки Broadcast каждому TelegramUser, чтобы контролировать успешность отправки.                                       |


# Функция «Познакомиться» 

Данная функция позволяет участникам митапа создавать личные анкеты и искать других людей для общения.

## Как работает данная функция:

Пользователь нажимает кнопку «Познакомиться».

Если анкета уже существует — бот показывает её и предлагает:

 - Искать собеседника

 - Редактировать анкету

 - Выйти в меню

Если анкеты нет — бот запускает заполнение анкеты в след порядке:

-Имя-

-Возраст-

-Чем занимается-

-Кого хочет найти-

После заполнения данных, анкета сохраняется в базе данных.


## Поиск собеседников:

бот показывает анкеты других участников (кроме текущего);

доступные действия:

 - Написать человеку

 - Следующий собеседник

 - Вернуться к анкете

если анкеты закончились — бот предлагает вернуться в меню или к своей анкете.

Все данные пользователей хранятся в модели NetworkingProfile, связанной с TelegramUser.






Как запустить и протестировать

Запустить Django-сервер (если нужен админ):

python manage.py runserver


В отдельном терминале запустить бота:

python manage.py run_bot


Открыть в Telegram своего бота @MeeetUuup_bot, написать /start.

cd /.../meetup_bot/meetupbot


Сейчас логика `_get_current_event()` такая:
```
def _get_current_event():
    now = timezone.now().date()
    event = Event.objects.filter(is_current=True).order_by("date").first()
    if event:
        return event
    return (
        Event.objects.filter(is_active=True, date__gte=now)
        .order_by("date")
        .first()
    )
```

То есть - всегда убираем после мероприятия `is_current=True`:

Если есть хоть одно Event с `is_current=True` — бот всегда берёт его, даже если дата 1935 год.

Только если нет `is_current=True`, он смотрит активные ивенты по дате (date__gte=now).


